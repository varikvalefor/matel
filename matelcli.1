.Dd $Mdocdate$
.Dt matelcli 1
.Os OpenBSD 6.9
.Sh NAME
.Nm matelcli
.Nd command-line interface to the Matrix messaging service
.Sh SYNOPSIS
.Nm matelcli
.Ar command argument
.Sh DESCRIPTION
.Nm matelcli
is used to perform various Matrix-related tasks via a command-line
interface, as opposed to the terminal user interface of
.Xr matel 1 .
.Pp
The benefits of this user interface include but are not limited to
scriptability, intuitiveness, and a decent number of Easter eggs.
.Sh LISTING STUFF
.Nm matelcli list
.Op rooms | communities | spaces
.Pp
The
.Nm list
command lists various Matrix entities.
.Pp
.Nm matelcli list rooms
lists the Matrix rooms of which the user of
.Nm matelcli
is a member.
.Pp
.Nm matelcli list communities
lists the Matrix communities of which the user of
.Nm matelcli
is a member.
.Pp
.Nm matelcli list spaces
lists the Matrix spaces of which the user of
.Nm matelcli
is a member.
.Sh SENDING MESSAGES
.Nm matelcli send
.Op text | file
.Ar target
.Nm to
.Ar roomid
.Pp
The
.Nm send
command is used to send messages to the Matrix room whose ID is
specified as
.Ar roomId .
.Pp
.Ar roomId
is of the format
.Dq #[roomname]:[homeserver] ,
e.g.,
.Dq #furrytech:matrix.org ,
which VARIK finds to be a damn fine chatroom.
.Pp
.Nm matelcli send text
.Ar target
.Nm to
.Ar roomId
sends the string
.Ar target
to the Matrix room
.Ar roomId .
.Pp
.Nm matelcli send file
.Ar target
.Nm to
.Ar roomId
sends the file which is located at file path
.Ar target
to the Matrix room
.Ar roomId .
.Sh GRABBING PILLS, IF ``PILLS'' REFERS TO MESSAGES
.Nm matelcli grab
.Ar n
.Op recent | first
.Nm from
.Ar roomId
.Pp
The
.Nm grab
command is used to fetch messages from Matrix rooms.
.Pp
.Ar roomId
is of the format
.Dq #[roomname]:[homeserver] .
.Pp
.Nm matelcli grab
.Ar n
.Nm recent
.Ar roomId
fetches the
.Ar n
messages which are most recently sent to room
.Ar roomId .
.Pp
.Nm matelcli grab
.Ar n
.Nm early
.Ar roomId
fetches the
.Ar n
earliest messages of room
.Ar roomId .
.Sh MARKING MESSAGES AS HAVING BEEN READ
Where
.Ar k
is a message identifier which is known to be valid,
.Nm matelcli markread
.Ar k
marks the message whose message identifier is
.Ar k
as having been read.
.Sh ENTERING THE MATRIX
Using the username and password which are specified in Config.hs,
.Nm matelcli login
generates a new authorisation token for the user's Matrix account and
prints this authorisation token to the standard output.
.Sh SYNC
.Nm matelcli sync
.Op Ar since
.Pp
The Matrix
.Dq sync
command can be sent to the homeserver via the
.Nm matelcli
.Nm sync
command.
.Pp
If
.Ar since
is specified, then the
.Dq since
value of the
.Dq sync
request equals
.Ar since.
The
.Dq since
value is otherwise unmentioned in the
.Dq sync
request.
.Sh JOINING ROOMS
.Nm matelcli join
.Ar room
.Op Ar inviter_id token signature
.Pp
Matrix rooms are joined via the
.Nm join
command.
.Pp
If the number of arguments equals 1, then
.Nm matelcli
attempts to add the user to the room whose internal Matrix ID is
.Ar room .
.Pp
If the number of arguments equals 4, then
.Nm matelcli
attempts to add the user to the room whose internal Matrix ID is
.Ar room
such that the Matrix API query mentions the inviter's user ID
.Ar inviter_id ,
the token of the invitation
.Ar token ,
and the signature of the invitation
.Ar signature .
.Sh LEAVING ROOMS
.Nm matelcli leave
.Ar roomid
.Pp
The
.Nm leave
command is used to leave Matrix rooms.
.Pp
If command
.Nm leave Ar roomid
is entered and all goes well, then Matel's user leaves the Matrix room
whose internal ID is
.Ar roomid .
If something breaks, then a description of the breakage is output to
the standard error.
.Sh AUTHOR
.Nm matelcli
is maintained by
.An Varik
.An Dq NOT A COMPUTER PROGRAMMER!!!
.An Valefor
.Aq varikvalefor@aol.com .
